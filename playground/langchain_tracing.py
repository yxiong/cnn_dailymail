import os
os.environ["LANGCHAIN_HANDLER"] = "langchain"

from langchain.chains.summarize import load_summarize_chain
from langchain.docstore.document import Document
from langchain.llms import OpenAI
from langchain.prompts import PromptTemplate


PROMPT_TEMPLATE = '''Here is a news article. Summarize this article into 3 or 4 bullet points. Use less than 75 words in total.

```{text}```

CONCISE SUMMARY:'''

PROMPT = PromptTemplate(template=PROMPT_TEMPLATE, input_variables=["text"])

llm = OpenAI(temperature=0)
chain = load_summarize_chain(llm, chain_type="stuff", prompt=PROMPT)

ARTICLE = """Positive message: The Chancellor, pictured today in Tilbury, has portrayed Britain as ‘the comeback country’ with better times ahead . George Osborne yesterday used his final Budget before the election to help savers, low earners and homebuyers. Seizing on a run of excellent economic news, the Chancellor portrayed Britain as ‘the comeback country’ with better times ahead. He sought to blunt Labour’s lines of attack – notably on living standards – by declaring that families will be £900 better off this year than they were in 2010. By easing back his austerity plans to match the level of state spending under Tony Blair in 2000, he rubbished the Opposition’s apocalyptic warnings of a return to the 1930s. Tax cuts will be paid for in part by a £5billion double strike on the banks. Mr Osborne put thrift and home ownership at the heart of his nakedly political statement and said the ‘sun is starting to shine’. He delighted Tory MPs with a surprise announcement that 95 per cent of savers – many of them pensioners punished by years of low interest rates – are to be freed from paying tax on their life savings. A new personal savings allowance will mean they can earn up to £1,000 in interest without paying tax. With most accounts paying around 1 per cent, this would mean nest-eggs of up to £100,000 would be exempt. Other measures in Mr Osborne’s sixth Budget included: . Mr Osborne also sought to dispel perceptions that the Tories were friends of the rich by cutting pension tax relief for the best-off. With just 50 days to go to the election, he allowed himself a pat on the back for ‘historic’ jobs figures, published ahead of the Budget. There are now 30.9million people in work – an all-time high – with the coalition overseeing the creation of 1,600 jobs a day over the past year. Revealed: Mail analysis of the budget reveals how tax and National Insurance changes from April will affect your income from April . Debate: Sky News host Eamonn Holmes took the Chancellor to task in a series of post-Budget interviews given this morning . The public sector payroll is down to 5.4million, or 17 per cent of the workforce, a record low. But in a significant rebalancing of the economy, there are 2.3million more in private sector jobs than 2010. While Labour’s Ed Miliband had wanted the UK to follow the policy measures of socialist France, the British economy was now growing at seven times its rate, Mr Osborne said.Scroll down for video . And though Labour had claimed austerity measures would mean a million more unemployed, the ‘great county’ of Yorkshire had created more jobs than the whole of France on its own. ‘The sun is starting to shine – and we are fixing the roof,’ the Chancellor told MPs. ‘We took difficult decisions in the teeth of opposition and it worked. Britain is walking tall again. ‘Five years ago, our economy had suffered a collapse greater than almost any country. Today, I can confirm: in the last year we have grown faster than any other major advanced economy in the world. ‘The critical choice facing the country now is this: do we return to the chaos of the past? Or do we say to the British people, let’s work through the plan that is delivering for you? ‘We choose the future. Our goal is for Britain to become the most prosperous economy in the world.’ George Osborne, pictured holding up his Budget briefcase for the cameras outside 11 Downing Street, yesterday used his final Budget before the election to help savers, low earners and homebuyers . Labour leader Mr Miliband said Mr Osborne had ‘failed working families’ and stuck to his claim that households are on average £1,600 a year worse off . Mr Osborne hailed better than expected growth figures, which suggest the economy will expand by 2.5 per cent this year. He also announced that the Government had met its target set in 2010 to see national debt falling as a share of national income by the time of the next election. The Chancellor said the beneficial effect on the public finances of lower inflation, plus a sell-off of a chunk of mortgage debts nationalised in the financial crisis, meant he could pay down some of Britain’s vast debt pile. He also said he would end the squeeze on public spending a year earlier than planned. By 2019, public spending would be growing again in line with the economy. Acknowledging the pain of years of austerity, the Chancellor said ‘the hard work and sacrifice of the British people has paid off’. The independent Office for Budget Responsibility said public spending faces a ‘rollercoaster’ ride, with tough cuts between 2016 and 2018 followed by a surge in spending at the end of the decade. Labour leader Mr Miliband said Mr Osborne had ‘failed working families’ and stuck to his claim that households are on average £1,600 a year worse off. ‘This is a Budget that people won’t believe from a government that is not on their side,’ Mr Miliband told MPs. ‘Five years ago, what did the Chancellor say – “we will balance the books in five years”. No ifs, no buts – just like the immigration pledge. The only thing long term about his plan is that it will take twice as long to balance the books. That is the reality.’ Though the Tories have vowed to maintain protection for the NHS budget, Mr Miliband claimed they must have a ‘secret plan’ to cut it because ‘colossal’ cuts to other areas of spending would not otherwise be deliverable. The Lib Dems, who will today set out alternative plans for the years after 2016, claimed credit for the hikes in the personal income tax allowance."""

doc = Document(page_content=ARTICLE)
print(chain.run([doc]))
